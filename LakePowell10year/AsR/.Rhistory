write.csv(dfPowellAnnual,"dfPowellAnnual.csv" )
#### Figure 1. Annual Powell Release compared to 7.5 and 8.23 targets
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
#Get the color palettes
#Get the blue color bar
pBlues <- brewer.pal(9,"Blues")
pReds <- brewer.pal(9,"Reds")
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
geom_color_manual("Release" = pBlues[8], "8.23 Target" = pReds[7], "7.5 Target" = pReds[5]) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellMonthYearDecadeRelease.png", width=9, height = 6.5, units="in")
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual("Release" = pBlues[8], "8.23 Target" = pReds[7], "7.5 Target" = pReds[5]) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c("Release" = pBlues[8], "8.23 Target" = pReds[7], "7.5 Target" = pReds[5])) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c("Release" = pBlues[8], "8.23 Target" = pReds[7], "7.5 Target" = pReds[5])) +
scale_x_continuous(breaks = seq(1970,2026,2)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c("Release" = pBlues[8], "8.23 Target" = pReds[7], "7.5 Target" = pReds[5])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powel Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
cPlotLines <- c("Release", "8.23 Target", "7.5 Target")
cPlotLinesFactor <- factor(cPlotLines, levels = c(cPlotLines[1], cPlotLines[2], cPlotLines[3]))
cPlotLines <- c("Release", "8.23 Target", "7.5 Target")
# As factor
cPlotLinesFactor <- factor(cPlotLines, levels = c(cPlotLines[1], cPlotLines[2], cPlotLines[3]))
ggplot() +
#Powell release - annual
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(data=dfPowellAnnual,aes(x=WaterYear,y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c(cPlotLinesFactor[1] = pBlues[8], cPlotLinesFactor[2] = pReds[7], cPlotLinesFactor[3] = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnual, aes(x = WaterYear, color = cPlotLinesFactor)) +
#Powell release - annual
geom_line(aes(y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(aes(y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(aes(y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c(cPlotLines[1] = pBlues[8], cPlotLines[2] = pReds[7], cPlotLines[3] = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnual, aes(x = WaterYear, color = cPlotLinesFactor)) +
#Powell release - annual
geom_line(aes(y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(aes(y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(aes(y=TenYearTarget/10, color="7.5 Target"), size=2)
ggplot(data = dfPowellAnnual, aes(x = WaterYear, color = cPlotLinesFactor)) +
#Powell release - annual
geom_line(aes(y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(aes(y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(aes(y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c(cPlotLines[1] = pBlues[8], cPlotLines[2] = pReds[7], cPlotLines[3] = pReds[4]))
ggplot(data = dfPowellAnnual, aes(x = WaterYear, color = cPlotLinesFactor)) +
#Powell release - annual
geom_line(aes(y=AnnualRelease, color="Release"), size=2) +
#  8.23 Target
geom_line(aes(y=TenYearTarget82/10, color="8.23 Target"), size=2) +
#  7.5 Target
geom_line(aes(y=TenYearTarget/10, color="7.5 Target"), size=2) +
scale_color_manual(values = c(pBlues[8], pReds[7],pReds[4]))
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, TenYearTarget/10, TenYearTarget82/10), names_to = DataType, values_to = Flow)
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, TenYearTarget/10, TenYearTarget82/10), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, TenYearTarget, TenYearTarget82), names_to = "DataType", values_to = "Flow")
View(dfPowellAnnualLong)
#Calculate Annual flow in million acre-feet
dfPowellAnnual <- dfPowellHist %>% select(WaterYear, total.release) %>% group_by(WaterYear) %>% dplyr::summarize(AnnualRelease = sum(total.release)*nCFSToAF/1e6)
#Trim first and last years with incomplete data
nFirstYear <- min(dfPowellAnnual$WaterYear) + 1
nLastYear <-  max(dfPowellAnnual$WaterYear)
dfPowellAnnual <- dfPowellAnnual %>% filter(WaterYear > nFirstYear, WaterYear < nLastYear)
#10-year total release
dfPowellAnnual$TenYearRelease <- rollapply(dfPowellAnnual$AnnualRelease, 10,sum, fill=NA, align="right")
#9-year total
dfPowellAnnual$NineYearRelease <- rollapply(dfPowellAnnual$AnnualRelease, 9,sum, fill=NA, align="right")
#75 and 82.5 MAF ten-year targets
dfPowellAnnual$OneYearTarget <- 7.48  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$OneYearTarget82 <- dfPowellAnnual$OneYearTarget + 0.75
write.csv(dfPowellAnnual,"dfPowellAnnual.csv" )
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, OneYearTarget, OneYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLongColor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
ggplot(data = dfPowellAnnual, aes(x = WaterYear, y = Flow , color = DataTypeFactor)) +
#Powell release - annual
geom_line(size=2) +
scale_color_manual(values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnualLong, aes(x = WaterYear, y = Flow , color = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnualLong, aes(x = WaterYear, y = Flow , color = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(breaks = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnualLong, aes(x = WaterYear, y = Flow , color = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellAnnualRelease.png", width=9, height = 6.5, units="in")
dfPowellAnnual$TenYearTarget <- dfPowellAnnual$OneYearTarget * 10  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$TenYearTarget82 <- dfPowellAnnual$TenYearTarget + 0.75
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget,TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("10YearRelease", "TenYearTarget82", "TenYearTarget") )
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, OneYearTarget, OneYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellAnnualRelease.png", width=9, height = 6.5, units="in")
dfPowellTenYearLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget,TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("10YearRelease", "TenYearTarget82", "TenYearTarget") )
ggplot(data = dfPowell10YearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
dfPowellTenYearLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget,TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellTenYearLong$DataType, levels = c("10YearRelease", "TenYearTarget82", "TenYearTarget") )
ggplot(data = dfPowell10YearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
View(dfPowellTenYearLong)
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
# Read in the historical Powell data
dfPowellHistorical <- read.csv(file=sPowellReleaseDataCode,
header=TRUE,
stringsAsFactors=FALSE,
sep=",")
#Interpolate Powell storage from level to check
## For 2020 data
dfPowellHist <- dfPowellHistorical
dDateInterval <- 365 # Days
#Convert date text to date value
dfPowellHist$DateValue <- as.POSIXct(dfPowellHist$datetime)
# Convert CFS to Acre-feet per month
nCFStoAFMon <- 60.37
nCFStoAFDay <- nCFStoAFMon/30.5
nCFSToAF <- nCFStoAFDay
#Calculate Day, Month, and Year
dfPowellHist$Year <- year(dfPowellHist$DateValue)
dfPowellHist$Month <- month(dfPowellHist$DateValue)
dfPowellHist$Day <- day(dfPowellHist$DateValue)
#Calculate Water Year
dfPowellHist$WaterYear <- ifelse(dfPowellHist$Month >= 10, dfPowellHist$Year + 1, dfPowellHist$Year)
#Calculate Annual flow in million acre-feet
dfPowellAnnual <- dfPowellHist %>% select(WaterYear, total.release) %>% group_by(WaterYear) %>% dplyr::summarize(AnnualRelease = sum(total.release)*nCFSToAF/1e6)
#Trim first and last years with incomplete data
nFirstYear <- min(dfPowellAnnual$WaterYear) + 1
nLastYear <-  max(dfPowellAnnual$WaterYear)
dfPowellAnnual <- dfPowellAnnual %>% filter(WaterYear > nFirstYear, WaterYear < nLastYear)
#10-year total release
dfPowellAnnual$TenYearRelease <- rollapply(dfPowellAnnual$AnnualRelease, 10,sum, fill=NA, align="right")
#9-year total
dfPowellAnnual$NineYearRelease <- rollapply(dfPowellAnnual$AnnualRelease, 9,sum, fill=NA, align="right")
#7.48 and 8.23 MAF annual targets
dfPowellAnnual$OneYearTarget <- 7.48  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$OneYearTarget82 <- dfPowellAnnual$OneYearTarget + 0.75
dfPowellAnnual$TenYearTarget <- dfPowellAnnual$OneYearTarget * 10  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$TenYearTarget82 <- dfPowellAnnual$TenYearTarget + 0.75
# # Difference between 10-year and target
# dfPowellAnnual$Diff75 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget
# dfPowellAnnual$Diff82 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget82
# # Add text for the decade
# # 10-year values
# dfPowellHistAnnual$Decade <- paste0(dfPowellHistAnnual$Year - 10 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$TenYearReleaseRnd <- round(dfPowellHistAnnual$TenYearRelease, digits=1)
# dfPowellHistAnnual$TenYearDiffRnd <- round(dfPowellHistAnnual$Diff, digits=1)
#
# # 9-year value
# dfPowellHistAnnual$NineYearPeriod <- paste0(dfPowellHistAnnual$Year - 9 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$NineYearReleaseRnd <- round(dfPowellHistAnnual$NineYearRelease, digits=1)
# dfPowellHistAnnual$NineYearDiffRnd <- round(dfPowellHistAnnual$NineYearRelease - 8.23*9, digits=1)
#
# # Select into two columns and reverse sort
# dfPowellByDecade <- dfPowellHistAnnual %>% arrange(Year, decreasing = TRUE) %>% select(Decade, TenYearReleaseRnd,TenYearDiffRnd, NineYearRelease)
#Export to CSV
write.csv(dfPowellAnnual,"dfPowellAnnual.csv" )
#Get the color palettes
#Get the blue color bar
pBlues <- brewer.pal(9,"Blues")
pReds <- brewer.pal(9,"Reds")
#### Figure 1. Annual Powell Release compared to 7.5 and 8.23 targets
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, OneYearTarget, OneYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellAnnualRelease.png", width=9, height = 6.5, units="in")
dfPowellTenYearLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget,TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellTenYearLong$DataType, levels = c("10YearRelease", "TenYearTarget82", "TenYearTarget") )
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellTenYearLong$DataType, levels = c("TenYearRelease", "TenYearTarget82", "TenYearTarget") )
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2)
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4]))
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = pBlues[8], "TenYearTarget82" =  pReds[7], "TenYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = "solid", "TenYearTarget82" =  "dashed", "TenYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
dfPowellAnnual$OneYearTarget <- 7.48  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$OneYearTarget82 <- dfPowellAnnual$OneYearTarget + 0.75
dfPowellAnnual$TenYearTarget <- dfPowellAnnual$OneYearTarget * 10  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$TenYearTarget82 <- dfPowellAnnual$TenYearTarget + 10*7.5
# # Difference between 10-year and target
# dfPowellAnnual$Diff75 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget
# dfPowellAnnual$Diff82 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget82
# # Add text for the decade
# # 10-year values
# dfPowellHistAnnual$Decade <- paste0(dfPowellHistAnnual$Year - 10 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$TenYearReleaseRnd <- round(dfPowellHistAnnual$TenYearRelease, digits=1)
# dfPowellHistAnnual$TenYearDiffRnd <- round(dfPowellHistAnnual$Diff, digits=1)
#
# # 9-year value
# dfPowellHistAnnual$NineYearPeriod <- paste0(dfPowellHistAnnual$Year - 9 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$NineYearReleaseRnd <- round(dfPowellHistAnnual$NineYearRelease, digits=1)
# dfPowellHistAnnual$NineYearDiffRnd <- round(dfPowellHistAnnual$NineYearRelease - 8.23*9, digits=1)
#
# # Select into two columns and reverse sort
# dfPowellByDecade <- dfPowellHistAnnual %>% arrange(Year, decreasing = TRUE) %>% select(Decade, TenYearReleaseRnd,TenYearDiffRnd, NineYearRelease)
#Export to CSV
write.csv(dfPowellAnnual,"dfPowellAnnual.csv" )
#Get the color palettes
#Get the blue color bar
pBlues <- brewer.pal(9,"Blues")
pReds <- brewer.pal(9,"Reds")
#### Figure 1. Annual Powell Release compared to 7.5 and 8.23 targets
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, OneYearTarget, OneYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellAnnualRelease.png", width=9, height = 6.5, units="in")
#### Figure 2. Ten-Year Powell Release compared to 10-year targets
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellTenYearLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget, TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellTenYearLong$DataType, levels = c("TenYearRelease", "TenYearTarget82", "TenYearTarget") )
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = pBlues[8], "TenYearTarget82" =  pReds[7], "TenYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = "solid", "TenYearTarget82" =  "dashed", "TenYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
dfPowellAnnual$OneYearTarget <- 7.48  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$OneYearTarget82 <- dfPowellAnnual$OneYearTarget + 0.75
dfPowellAnnual$TenYearTarget <- dfPowellAnnual$OneYearTarget * 10  # Paria flow (0.02 maf per year adds 0.2 maf over 10 years)
dfPowellAnnual$TenYearTarget82 <- dfPowellAnnual$TenYearTarget + 10*0.75
# # Difference between 10-year and target
# dfPowellAnnual$Diff75 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget
# dfPowellAnnual$Diff82 <- dfPowellAnnual$TenYearRelease - dfPowellAnnual$TenYearTarget82
# # Add text for the decade
# # 10-year values
# dfPowellHistAnnual$Decade <- paste0(dfPowellHistAnnual$Year - 10 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$TenYearReleaseRnd <- round(dfPowellHistAnnual$TenYearRelease, digits=1)
# dfPowellHistAnnual$TenYearDiffRnd <- round(dfPowellHistAnnual$Diff, digits=1)
#
# # 9-year value
# dfPowellHistAnnual$NineYearPeriod <- paste0(dfPowellHistAnnual$Year - 9 + 1," to ",dfPowellHistAnnual$Year)
# dfPowellHistAnnual$NineYearReleaseRnd <- round(dfPowellHistAnnual$NineYearRelease, digits=1)
# dfPowellHistAnnual$NineYearDiffRnd <- round(dfPowellHistAnnual$NineYearRelease - 8.23*9, digits=1)
#
# # Select into two columns and reverse sort
# dfPowellByDecade <- dfPowellHistAnnual %>% arrange(Year, decreasing = TRUE) %>% select(Decade, TenYearReleaseRnd,TenYearDiffRnd, NineYearRelease)
#Export to CSV
write.csv(dfPowellAnnual,"dfPowellAnnual.csv" )
#Get the color palettes
#Get the blue color bar
pBlues <- brewer.pal(9,"Blues")
pReds <- brewer.pal(9,"Reds")
#### Figure 1. Annual Powell Release compared to 7.5 and 8.23 targets
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellAnnualLong <- pivot_longer(data = dfPowellAnnual, cols = c(AnnualRelease, OneYearTarget, OneYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellAnnualLong$DataTypeFactor <- factor(dfPowellAnnualLong$DataType, levels = c("AnnualRelease", "OneYearTarget82", "OneYearTarget") )
ggplot(data = dfPowellAnnualLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = pBlues[8], "OneYearTarget82" =  pReds[7], "OneYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("Annual Release", "8.23 Target", "7.48 Target"), values = c("AnnualRelease" = "solid", "OneYearTarget82" =  "dashed", "OneYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellAnnualRelease.png", width=9, height = 6.5, units="in")
#### Figure 2. Ten-Year Powell Release compared to 10-year targets
#Pivot the Wide format to Longer for Plotting with different colors
dfPowellTenYearLong <- pivot_longer(data = dfPowellAnnual, cols = c(TenYearRelease, TenYearTarget, TenYearTarget82), names_to = "DataType", values_to = "Flow")
dfPowellTenYearLong$DataTypeFactor <- factor(dfPowellTenYearLong$DataType, levels = c("TenYearRelease", "TenYearTarget82", "TenYearTarget") )
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = pBlues[8], "TenYearTarget82" =  pReds[7], "TenYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = "solid", "TenYearTarget82" =  "dashed", "TenYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggplot(data = dfPowellTenYearLong %>% filter(WaterYear >= 1995), aes(x = WaterYear, y = Flow , color = DataTypeFactor, linetype = DataTypeFactor)) +
#Powell release
geom_line(size=2) +
scale_color_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = pBlues[8], "TenYearTarget82" =  pReds[7], "TenYearTarget" = pReds[4])) +
scale_linetype_manual(labels = c("10-Year Release", "82.3 Target", "74.8 Target"), values = c("TenYearRelease" = "solid", "TenYearTarget82" =  "dashed", "TenYearTarget" = "twodash")) +
scale_x_continuous(breaks = seq(1970,2026,5)) +
theme_bw() +
#coord_fixed() +
labs(x="", y="Powell Release\n(million acre-feet per year)") +
theme(text = element_text(size=20), legend.title=element_blank(), legend.text=element_text(size=18))
#theme(text = element_text(size=20), legend.text=element_text(size=16)
ggsave("PowellTenYearRelease.png", width=9, height = 6.5, units="in")
